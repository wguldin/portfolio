var folio={ajax:{},utils:{}};folio.ajax=function(){var e={};return e.init=function(){var t=window.location.pathname;e.pushState(t),e.bindClickListener(t),e.updateNavClass(t),e.bindHistoryListener()},e.pushState=function(e){history.pushState({url:e},"",e)},e.bindClickListener=function(t,a){if(a)var o=folio.utils.find('a[href^="/"], a[href^="'+t+'"]',a);else var o=folio.utils.find('a[href^="/"], a[href^="'+t+'"]');for(var n=0;n<o.length;n++){var l=o[n];l.addEventListener("click",function(t){var a=t.target;if(!folio.utils.hasClass(a,"js-download")){t.preventDefault();var o,n=window.location.pathname.replace(/\/$/,"");if(folio.utils.matches(a,"a"))o=t.target.pathname;else{var l=folio.utils.getClosest(a,"a");o=l.pathname}if(n!=o){e.pushState(o),e.loadPartial(o),e.updateNavClass(o);var i=document.getElementById("intro-box");"/"==o?folio.utils.addClass(i,"c-intro__box--home"):folio.utils.removeClass(i,"c-intro__box--home");var s=document.getElementById("intro");"/about"==o?folio.utils.addClass(s,"c-intro--about"):folio.utils.removeClass(s,"c-intro--about")}}})}},e.bindHistoryListener=function(){window.onpopstate=function(t){e.loadPartial(t.state.url)}},e.loadPartial=function(t){var a=document.getElementById("sidebar");a.innerHTML="",e.showLoader(function(){e.loadPartialAjaxRequest(t)})},e.loadPartialAjaxRequest=function(t){var a=new XMLHttpRequest;a.open("GET",t,!0),a.onload=function(o){if(a.status>=200&&a.status<400){var n=document.createElement("html");n.innerHTML=o.target.response;var l=n,i=l.querySelectorAll("#main-content")[0].innerHTML,s=l.querySelectorAll("#sidebar")[0].innerHTML,r=l.getElementsByTagName("title")[0].textContent;document.title=r,e.updateMetaTags(l);var c=document.getElementById("main-content"),u=document.getElementById("sidebar");c.innerHTML=i,u.innerHTML=s,e.bindClickListener(t,c),document.body.scrollTop=document.documentElement.scrollTop=0,e.hideLoader(),ga("send","pageview",window.location.pathname)}else console.warn("error")},a.onerror=function(){console.warn("error")},a.send()},e.showLoader=function(e){var t=100,a=document.getElementById("main-content");folio.utils.addClass(a,"u-fade--out"),setTimeout(function(){e()},t)},e.hideLoader=function(){var e=document.getElementById("main-content");folio.utils.removeClass(e,"u-fade--out")},e.updateMetaTags=function(e){var t=e.querySelectorAll("#hide-search");if(t&&t.length>0){var a=document.createElement("meta");a.name="robots",a.content="noindex",document.getElementsByTagName("head")[0].appendChild(a)}else{var o=document.querySelectorAll("meta[name='robots']");o&&o.length>0&&o[0].remove()}},e.updateNavClass=function(e){var t=document.getElementById("nav");if(activeLink=folio.utils.find(".c-nav__link--active",t),activeLink.length>0&&folio.utils.removeClass(activeLink[0],"c-nav__link--active"),"/"==e||e.includes("/work/")){var a=document.getElementById("home-link");folio.utils.addClass(a,"c-nav__link--active")}else if("/blog"==e||e.includes("/blog/")){var o=document.getElementById("blog-link");folio.utils.addClass(o,"c-nav__link--active")}else if("/talks"==e){var n=document.getElementById("talks-link");folio.utils.addClass(n,"c-nav__link--active")}else{if("/about"!=e)return;var l=document.getElementById("about-link");folio.utils.addClass(l,"c-nav__link--active")}},e}(),folio.utils.randomIntFromInterval=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},folio.utils.find=function(e,t){return Array.prototype.slice.call((t?t:document).querySelectorAll(e))},folio.utils.hasClass=function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},folio.utils.addClass=function(e,t){e.classList?e.classList.add(t):folio.utils.hasClass(e,t)||(e.className+=" "+t)},folio.utils.removeClass=function(e,t){if(e.classList)e.classList.remove(t);else if(folio.utils.hasClass(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ")}},folio.utils.matches=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},folio.utils.getClosest=function(e,t){for(var a=e;a&&1===a.nodeType;){if(folio.utils.matches(a,t))return a;a=a.parentNode}return null},String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var a=arguments[t];e=e.replace(new RegExp("\\{"+t+"\\}","gm"),a)}return e},function(){folio.ajax.init()}();