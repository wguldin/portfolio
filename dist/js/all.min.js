var folio={ajax:{},graphic:{},utils:{}};folio.ajax=function(){var t={};return t.init=function(){var e=window.location.pathname;t.pushState(e),t.bindClickListener(e),t.bindHistoryListener()},t.pushState=function(t){history.pushState({url:t},"",t)},t.bindClickListener=function(e){for(var n=document.querySelectorAll('a[href^="/"], a[href^="'+e+'"]'),o=0;o<n.length;o++){var a=n[o];a.addEventListener("click",function(e){e.preventDefault();var n,o=e.target;if(folio.utils.matches(o,"a"))n=e.target.pathname;else{var a=folio.utils.getClosest(o,"a");n=a.pathname}t.pushState(n),t.loadPartial(n)})}},t.bindHistoryListener=function(){window.onpopstate=function(e){t.loadPartial(e.state.url)}},t.loadPartial=function(e){t.showLoader(function(){t.loadPartialAjaxRequest(e)})},t.loadPartialAjaxRequest=function(e){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(e){if(n.status>=200&&n.status<400){var o=document.createElement("html");o.innerHTML=e.target.response;var a=o,i=a.querySelectorAll("#main")[0].innerHTML,r=a.getElementsByTagName("title")[0].textContent;document.title=r;var s=document.getElementById("main");s.innerHTML=i,t.bindClickListener(),document.body.scrollTop=document.documentElement.scrollTop=0,t.hideLoader(),ga("send","pageview",window.location.pathname)}else console.warn("error")},n.onerror=function(){console.warn("error")},n.send()},t.showLoader=function(t){var e=100,n=document.getElementById("main");folio.utils.addClass(n,"u-fade--out"),setTimeout(function(){t()},e)},t.hideLoader=function(){var t=document.getElementById("main");folio.utils.removeClass(t,"u-fade--out")},t}(),folio.graphic=function(){var t={};return t.svg=document.getElementById("illustration"),t.init=function(){if(t.svg){var e=t.svg.getBoundingClientRect();t.svgWidth=e.width,t.svgHeight=e.height,t.createGraphic()}},t.lineCount=48,t.createGraphic=function(){for(var e=SVG("#illustration"),n=0;n<t.lineCount;n++)t.createLine(e)},t.createLine=function(e){var n=t.setLineCoordinates(),o=Math.pow(Math.random(),.25)-.1,a=(t.getDistance(n),e.line(n.x1,n.y1,n.x1,n.y1));a.animate(500,250,"now").plot([[n.x1,n.y1],[n.x2,n.y2]]),a.attr({style:"opacity: {0}".format(o)})},t.setLineCoordinates=function(){var e=t.selectSide(),n=t.selectPoint(e),o=t.selectSide(e),a=t.selectPoint(o);return{x1:n.x,y1:n.y,x2:a.x,y2:a.y}},t.getDistance=function(t){var e=t.x1-t.x2,n=t.y1-t.y2,o=Math.sqrt(e*e+n*n);return o},t.selectPoint=function(e){var n={x:null,y:null};switch(e){case"t":n.x=folio.utils.randomIntFromInterval(0,t.svgWidth),n.y=t.svgHeight;break;case"b":n.x=folio.utils.randomIntFromInterval(0,t.svgWidth),n.y=0;break;case"l":n.x=0,n.y=folio.utils.randomIntFromInterval(0,t.svgHeight);break;case"r":n.x=t.svgWidth,n.y=folio.utils.randomIntFromInterval(0,t.svgHeight)}return n},t.selectSide=function(t){var e=["t","b","l","r"];if(t){var n=e.indexOf(t);-1!=n&&e.splice(n,1)}return e[Math.floor(Math.random()*e.length)]},t}(),folio.utils.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},folio.utils.hasClass=function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},folio.utils.addClass=function(t,e){t.classList?t.classList.add(e):folio.utils.hasClass(t,e)||(t.className+=" "+e)},folio.utils.removeClass=function(t,e){if(t.classList)t.classList.remove(e);else if(folio.utils.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}},folio.utils.matches=function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)},folio.utils.getClosest=function(t,e){for(var n=t;n&&1===n.nodeType;){if(folio.utils.matches(n,e))return n;n=n.parentNode}return null},String.prototype.format=function(){for(var t=this,e=0;e<arguments.length;e++){var n=arguments[e];t=t.replace(new RegExp("\\{"+e+"\\}","gm"),n)}return t},function(){folio.graphic.init(),folio.ajax.init()}();