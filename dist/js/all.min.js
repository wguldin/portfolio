var folio={ajax:{},utils:{}};folio.ajax=function(){var e={};return e.init=function(){var t=window.location.pathname;e.pushState(t),e.bindClickListener(t),e.bindHistoryListener()},e.pushState=function(e){history.pushState({url:e},"",e)},e.bindClickListener=function(t,o){if(o)var n=folio.find('a[href^="/"], a[href^="'+t+'"]',o);else var n=folio.find('a[href^="/"], a[href^="'+t+'"]');for(var a=0;a<n.length;a++){var i=n[a];i.addEventListener("click",function(t){var o=t.target;if(!folio.utils.hasClass(o,"js-download")){t.preventDefault();var n,a=window.location.pathname.replace(/\/$/,"");if(folio.utils.matches(o,"a"))n=t.target.pathname;else{var i=folio.utils.getClosest(o,"a");n=i.pathname}if(a!=n){e.pushState(n),e.loadPartial(n);var l=document.getElementById("intro-box");"/"==n?folio.utils.addClass(l,"c-intro__box--home"):folio.utils.removeClass(l,"c-intro__box--home");var s=document.getElementById("intro");"/about/"==n?folio.utils.addClass(s,"c-intro--about"):folio.utils.removeClass(s,"c-intro--about")}}})}},e.bindHistoryListener=function(){window.onpopstate=function(t){e.loadPartial(t.state.url)}},e.loadPartial=function(t){var o=document.getElementById("sidebar");o.innerHTML="",e.showLoader(function(){e.loadPartialAjaxRequest(t)})},e.loadPartialAjaxRequest=function(t){var o=new XMLHttpRequest;o.open("GET",t,!0),o.onload=function(n){if(o.status>=200&&o.status<400){var a=document.createElement("html");a.innerHTML=n.target.response;var i=a,l=i.querySelectorAll("#main-content")[0].innerHTML,s=i.querySelectorAll("#sidebar")[0].innerHTML,r=i.getElementsByTagName("title")[0].textContent;document.title=r;var c=document.getElementById("main-content"),u=document.getElementById("sidebar");c.innerHTML=l,u.innerHTML=s,e.bindClickListener(t,c),document.body.scrollTop=document.documentElement.scrollTop=0,e.hideLoader(),ga("send","pageview",window.location.pathname)}else console.warn("error")},o.onerror=function(){console.warn("error")},o.send()},e.showLoader=function(e){var t=100,o=document.getElementById("main-content");folio.utils.addClass(o,"u-fade--out"),setTimeout(function(){e()},t)},e.hideLoader=function(){var e=document.getElementById("main-content");folio.utils.removeClass(e,"u-fade--out")},e}(),folio.utils.randomIntFromInterval=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},folio.find=function(e,t){return Array.prototype.slice.call((t?t:document).querySelectorAll(e))},folio.utils.hasClass=function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},folio.utils.addClass=function(e,t){e.classList?e.classList.add(t):folio.utils.hasClass(e,t)||(e.className+=" "+t)},folio.utils.removeClass=function(e,t){if(e.classList)e.classList.remove(t);else if(folio.utils.hasClass(e,t)){var o=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(o," ")}},folio.utils.matches=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},folio.utils.getClosest=function(e,t){for(var o=e;o&&1===o.nodeType;){if(folio.utils.matches(o,t))return o;o=o.parentNode}return null},String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var o=arguments[t];e=e.replace(new RegExp("\\{"+t+"\\}","gm"),o)}return e},function(){folio.ajax.init()}();