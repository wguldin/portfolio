var folio={ajax:{},utils:{}};folio.ajax=function(){var t={};return t.init=function(){var e=window.location.pathname;t.pushState(e),t.bindClickListener(e),t.bindHistoryListener()},t.pushState=function(t){history.pushState({url:t},"",t)},t.bindClickListener=function(e,o){if(o)var n=folio.find('a[href^="/"], a[href^="'+e+'"]',o);else var n=folio.find('a[href^="/"], a[href^="'+e+'"]');for(var a=0;a<n.length;a++){var i=n[a];i.addEventListener("click",function(e){e.preventDefault();var o,n=e.target,a=window.location.pathname.replace(/\/$/,"");if(folio.utils.matches(n,"a"))o=e.target.pathname;else{var i=folio.utils.getClosest(n,"a");o=i.pathname}a!=o&&(t.pushState(o),t.loadPartial(o))})}},t.bindHistoryListener=function(){window.onpopstate=function(e){t.loadPartial(e.state.url)}},t.loadPartial=function(e){t.showLoader(function(){t.loadPartialAjaxRequest(e)})},t.loadPartialAjaxRequest=function(e){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(n){if(o.status>=200&&o.status<400){var a=document.createElement("html");a.innerHTML=n.target.response;var i=a,l=i.querySelectorAll("#main-content")[0].innerHTML,s=i.getElementsByTagName("title")[0].textContent;document.title=s;var r=document.getElementById("main-content");r.innerHTML=l,t.bindClickListener(e,r),document.body.scrollTop=document.documentElement.scrollTop=0,t.hideLoader(),ga("send","pageview",window.location.pathname)}else console.warn("error")},o.onerror=function(){console.warn("error")},o.send()},t.showLoader=function(t){var e=100,o=document.getElementById("main-content");folio.utils.addClass(o,"u-fade--out"),setTimeout(function(){t()},e)},t.hideLoader=function(){var t=document.getElementById("main-content");folio.utils.removeClass(t,"u-fade--out")},t}(),folio.utils.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},folio.find=function(t,e){return Array.prototype.slice.call((e?e:document).querySelectorAll(t))},folio.utils.hasClass=function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},folio.utils.addClass=function(t,e){t.classList?t.classList.add(e):folio.utils.hasClass(t,e)||(t.className+=" "+e)},folio.utils.removeClass=function(t,e){if(t.classList)t.classList.remove(e);else if(folio.utils.hasClass(t,e)){var o=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(o," ")}},folio.utils.matches=function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)},folio.utils.getClosest=function(t,e){for(var o=t;o&&1===o.nodeType;){if(folio.utils.matches(o,e))return o;o=o.parentNode}return null},String.prototype.format=function(){for(var t=this,e=0;e<arguments.length;e++){var o=arguments[e];t=t.replace(new RegExp("\\{"+e+"\\}","gm"),o)}return t},function(){folio.ajax.init()}();